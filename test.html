<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="utf-8"/>
  <title>Test modulů</title>
  <style>
    body { font-family: monospace; padding: 20px; }
    .success { color: green; }
    .error { color: red; }
    pre { background: #f0f0f0; padding: 10px; }
  </style>
</head>
<body>
  <h1>Test načítání ES6 modulů</h1>
  <div id="log"></div>

  <script type="module">
    const log = document.getElementById('log');

    function addLog(message, isError = false) {
      const div = document.createElement('div');
      div.className = isError ? 'error' : 'success';
      div.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
      log.appendChild(div);
      console.log(message);
    }

    addLog('✓ Test HTML načten');
    addLog('✓ ES6 module script běží');

    try {
      // Test importu main.js
      addLog('Zkouším importovat main.js...');

      import('./js/main.js')
        .then(() => {
          addLog('✓ main.js úspěšně načten');

          // Zkontrolovat globální funkce
          if (typeof window.ulozitData === 'function') {
            addLog('✓ window.ulozitData je k dispozici');
          } else {
            addLog('✗ window.ulozitData NENÍ k dispozici', true);
          }

          if (typeof window.addRow === 'function') {
            addLog('✓ window.addRow je k dispozici');
          } else {
            addLog('✗ window.addRow NENÍ k dispozici', true);
          }

          if (typeof window.shareDeeplink === 'function') {
            addLog('✓ window.shareDeeplink je k dispozici');
          } else {
            addLog('✗ window.shareDeeplink NENÍ k dispozici', true);
          }
        })
        .catch(err => {
          addLog(`✗ CHYBA při načítání main.js: ${err.message}`, true);
          addLog('Stack trace:', true);
          const pre = document.createElement('pre');
          pre.textContent = err.stack;
          log.appendChild(pre);
        });

    } catch (err) {
      addLog(`✗ CHYBA: ${err.message}`, true);
      const pre = document.createElement('pre');
      pre.textContent = err.stack;
      log.appendChild(pre);
    }
  </script>
</body>
</html>
